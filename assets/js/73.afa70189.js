(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{369:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"层叠布局"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#层叠布局"}},[t._v("#")]),t._v(" 层叠布局")]),t._v(" "),s("blockquote",[s("p",[t._v("本文作者："),s("a",{attrs:{href:"https://github.com/CN-YoungYang",target:"_blank",rel:"noopener noreferrer"}},[t._v("阳九五"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("本站地址："),s("a",{attrs:{href:"https://blog.59young.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.59young.com"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"stack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stack"}},[t._v("#")]),t._v(" Stack")]),t._v(" "),s("p",[s("code",[t._v("Stack")]),t._v("是一个可将子组件叠在一起显示的容器组件。")]),t._v(" "),s("h3",{attrs:{id:"布局算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#布局算法"}},[t._v("#")]),t._v(" 布局算法")]),t._v(" "),s("p",[s("code",[t._v("Stack")]),t._v("里的子组件在布局时会被分为“有位置”和“无位置”这2大类。")]),t._v(" "),s("ul",[s("li",[t._v("“有位置”组件 - "),s("code",[t._v("Positioned")]),t._v("组件")]),t._v(" "),s("li",[t._v("“无位置”组件 - 非"),s("code",[t._v("Positioned")]),t._v("组件")])]),t._v(" "),s("p",[t._v("布局时，"),s("code",[t._v("Stack")]),t._v("首先会找到所有的“无位置”的子组件，并向它们传入"),s("code",[t._v("fit")]),t._v("属性所设置的布局约束，允许它们一定程度内自由选择自身的尺寸，并让它们依次汇报最终确定的尺寸结果。")]),t._v(" "),s("p",[t._v("在得到全部“无位置”子组件所确定的最终尺寸后，"),s("code",[t._v("Stack")]),t._v("会把自身尺寸匹配到其中最大的子组件的尺寸，再把其他的子组件按照"),s("code",[t._v("aligenment")]),t._v("属性设置的对齐方式拜访。")]),t._v(" "),s("h4",{attrs:{id:"fit属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fit属性"}},[t._v("#")]),t._v(" fit属性")]),t._v(" "),s("p",[t._v("尺寸适配属性用于控制"),s("code",[t._v("Stack")]),t._v("如何将自己的父级组件的尺寸约束传达给“无位置”的子组件，类型是StackFit,默认值是StackFit.loose(宽松)。")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("StackFit.loose")]),t._v(": 未定位的子组件可以自由地选择它们的大小，不受Stack大小的限制。子组件会根据它们自己的属性和内容来确定大小，而不会尝试去填充或扩展到Stack的边界。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("StackFit.expand")]),t._v(": 未定位的子组件会尽可能地扩展以填充Stack的可用空间。这意味着如果Stack有一个确定的大小，子组件会尝试扩展到这个大小，通常是通过设置子组件的double.infinity作为约束条件。这通常用于让子组件填满整个Stack的空间。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("StackFit.passthrough")]),t._v(": 这个值表示父组件（即Stack）的约束条件会直接传递给未定位的子组件，而不会进行任何调整。这意味着子组件将根据父组件的约束条件来确定自己的大小。如果父组件的约束条件是宽松的，子组件可能会比Stack的实际大小小；如果约束条件是严格的，子组件可能会被压缩以适应Stack的大小。")])])]),t._v(" "),s("h4",{attrs:{id:"alignment属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#alignment属性"}},[t._v("#")]),t._v(" alignment属性")]),t._v(" "),s("p",[t._v("如果子组件的尺寸小于"),s("code",[t._v("Stack")]),t._v("本身，"),s("code",[t._v("alignment")]),t._v("属性可用指定对齐方式。")]),t._v(" "),s("p",[t._v("Alignment由两个值组成：x和y，它们分别表示水平和垂直方向上的相对位置。")]),t._v(" "),s("p",[t._v("Alignment的x和y值的范围是从-1.0到1.0，其中：")]),t._v(" "),s("p",[t._v("x = -1.0 表示最左边。"),s("br"),t._v("\nx = 0.0 表示中间。"),s("br"),t._v("\nx = 1.0 表示最右边。")]),t._v(" "),s("p",[t._v("同样地，")]),t._v(" "),s("p",[t._v("y = -1.0 表示最顶部。"),s("br"),t._v("\ny = 0.0 表示中间。"),s("br"),t._v("\ny = 1.0 表示最底部。")]),t._v(" "),s("p",[t._v("以下是一些常用的Alignment值的例子：")]),t._v(" "),s("p",[t._v("Alignment.topLeft：表示左上角，值为(-1.0, -1.0)。"),s("br"),t._v("\nAlignment.topCenter：表示顶部中间，值为(0.0, -1.0)。"),s("br"),t._v("\nAlignment.topRight：表示右上角，值为(1.0, -1.0)。"),s("br"),t._v("\nAlignment.centerLeft：表示中间左侧，值为(-1.0, 0.0)。"),s("br"),t._v("\nAlignment.center：表示正中心，值为(0.0, 0.0)。"),s("br"),t._v("\nAlignment.centerRight：表示中间右侧，值为(1.0, 0.0)。"),s("br"),t._v("\nAlignment.bottomLeft：表示左下角，值为(-1.0, 1.0)。"),s("br"),t._v("\nAlignment.bottomCenter：表示底部中间，值为(0.0, 1.0)。"),s("br"),t._v("\nAlignment.bottomRight：表示右下角，值为(1.0, 1.0)。")]),t._v(" "),s("h3",{attrs:{id:"叠放次序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#叠放次序"}},[t._v("#")]),t._v(" 叠放次序")]),t._v(" "),s("p",[s("code",[t._v("Stack")]),t._v("在渲染时会将子组件按照children属性里的列表顺序依次绘制并覆盖叠放，因此列表里第一个组件首先被绘制，于是出现在最底层，容易被其他组件覆盖。")]),t._v(" "),s("h3",{attrs:{id:"溢出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#溢出"}},[t._v("#")]),t._v(" 溢出")]),t._v(" "),s("p",[t._v("默认情况下，溢出"),s("code",[t._v("Stack")]),t._v("尺寸边界的子组件会被裁剪，不予显示。这一行为是由"),s("code",[t._v("clipBehavior")]),t._v("属性控制的，默认为"),s("code",[t._v("Clip.hardEdge")]),t._v("。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Clip.none")]),t._v(" "),s("td",[t._v("不进行裁剪。如果子组件没有超出父组件的边界，这个选项不会有任何性能消耗。")])]),t._v(" "),s("tr",[s("td",[t._v("Clip.hardEdge")]),t._v(" "),s("td",[t._v("进行裁剪但不应用抗锯齿。这种方式的裁剪速度比Clip.none慢一点，但比其他抗锯齿的方式快。")])]),t._v(" "),s("tr",[s("td",[t._v("Clip.antiAlias")]),t._v(" "),s("td",[t._v("进行裁剪并且应用抗锯齿，使得边缘更平滑。这种方式的裁剪速度比Clip.antiAliasWithSaveLayer快，但比Clip.hardEdge慢，通常用于处理圆形和弧形裁剪。")])]),t._v(" "),s("tr",[s("td",[t._v("Clip.antiAliasWithSaveLayer")]),t._v(" "),s("td",[t._v("进行裁剪、抗锯齿，并且在裁剪之后立即保存一个saveLayer。这种方式的性能开销最大，因为它涉及到额外的缓冲区，所以使用的情况较少。")])])])]),t._v(" "),s("h2",{attrs:{id:"示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),s("div",{staticClass:"language-dart line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomWidget")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StatelessWidget")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomWidget")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token metadata function"}},[t._v("@override")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Widget")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BuildContext")]),t._v(" context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SizedBox")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        child"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Stack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 居中对齐")]),t._v("\n          alignment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Alignment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("center"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子元素溢出, none 不裁剪")]),t._v("\n          clipBehavior"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Clip")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("none"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子元素层叠放")]),t._v("\n          children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 三个色块")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Container")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n              width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Colors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("amber"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Container")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n              width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Colors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("blue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Container")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n              width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Colors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("green"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 绝对定位")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Positioned")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n              right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              bottom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              child"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FlutterLogo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br")])]),s("p",[s("a",{attrs:{href:"https://raw.githubusercontent.com/CN-YoungYang/BlogAssets/refs/heads/master/docs/flutter/%E5%B8%83%E5%B1%80%E5%AE%B9%E5%99%A8/Flutter_%E5%B1%82%E5%8F%A0%E5%B8%83%E5%B1%80/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20241215215544.webp",target:"_blank",rel:"noopener noreferrer"}},[t._v("Image"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);