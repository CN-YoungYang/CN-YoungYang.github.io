(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{389:function(t,s,a){"use strict";a.r(s);var e=a(4),v=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"mklink-命令详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mklink-命令详解"}},[t._v("#")]),t._v(" mklink 命令详解")]),t._v(" "),s("p",[s("code",[t._v("mklink")]),t._v(" 是一个 Windows 命令行工具，用于创建符号链接（Symbolic Link）。符号链接，也被称为“软链接”，是一个指向另一个文件或目录的特殊文件。这在很多场景下都非常有用，例如，将一个应用程序的配置文件链接到另一个位置，或者将一个大的文件夹移动到另一个磁盘，同时在原来的位置保留一个链接。")]),t._v(" "),s("p",[s("strong",[t._v("本文档中的所有命令和技巧均适用于 Windows 10 和 Windows 11 环境。")])]),t._v(" "),s("h2",{attrs:{id:"语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[t._v("#")]),t._v(" 语法")]),t._v(" "),s("p",[s("code",[t._v("mklink")]),t._v(" 命令的基本语法如下：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("mklink "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/h"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[s("code",[t._v("<link>")]),t._v("：指定要创建的符号链接的名称。")]),t._v(" "),s("li",[s("code",[t._v("<target>")]),t._v("：指定符号链接指向的现有文件或目录的路径。")])]),t._v(" "),s("h3",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("无参数")]),t._v("：创建文件的符号链接（默认）。")]),t._v(" "),s("li",[s("strong",[t._v("/d")]),t._v("：创建一个目录的符号链接，也称为“软链接”。")]),t._v(" "),s("li",[s("strong",[t._v("/h")]),t._v("：创建一个硬链接（Hard Link），而不是符号链接。")]),t._v(" "),s("li",[s("strong",[t._v("/j")]),t._v("：创建一个目录联接（Directory Junction），也称为“目录连接点”。")])]),t._v(" "),s("p",[s("strong",[t._v("注意")]),t._v("：使用 "),s("code",[t._v("mklink")]),t._v(" 命令需要管理员权限。请以管理员身份运行命令提示符（CMD）或 PowerShell。")]),t._v(" "),s("h2",{attrs:{id:"各种链接类型的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#各种链接类型的区别"}},[t._v("#")]),t._v(" 各种链接类型的区别")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("文件的符号链接")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("mklink")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("类似于文件的快捷方式，但功能更强大，应用程序会将其视为真实文件。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("目录的符号链接")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("mklink /d")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("类似于目录的快捷方式，可以跨越不同的磁盘分区。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("文件的硬链接")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("mklink /h")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("创建一个与原始文件几乎无法区分的链接。它们共享相同的文件信息（如时间戳、属性），但占用独立的目录条目。删除其中一个不会影响另一个，只有当所有链接都被删除后，文件才会被真正删除。"),s("strong",[t._v("重要：硬链接不能跨越不同的文件系统（例如，不能从 C 盘链接到 D 盘）。")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("目录联接")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("mklink /j")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("一个较旧的功能，类似于目录的符号链接，但只能用于目录。它在本地卷上解析，因此性能可能比符号链接稍好，但不能链接到网络共享。")])])])]),t._v(" "),s("h2",{attrs:{id:"使用示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用示例"}},[t._v("#")]),t._v(" 使用示例")]),t._v(" "),s("h3",{attrs:{id:"_1-创建文件的符号链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建文件的符号链接"}},[t._v("#")]),t._v(" 1. 创建文件的符号链接")]),t._v(" "),s("p",[t._v("假设你想在 "),s("code",[t._v("C:\\Users\\YourUser\\Documents")]),t._v(" 目录下创建一个指向 "),s("code",[t._v("D:\\Files\\MyDocument.txt")]),t._v(" 的链接，名为 "),s("code",[t._v("MyDoc.txt")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("mklink "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\Users\\YourUser\\Documents\\MyDoc.txt"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\Files\\MyDocument.txt"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2-创建目录的符号链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建目录的符号链接"}},[t._v("#")]),t._v(" 2. 创建目录的符号链接")]),t._v(" "),s("p",[t._v("假设你想将 "),s("code",[t._v("C:\\Program Files\\SomeApp\\LargeFolder")]),t._v(" 移动到 "),s("code",[t._v("D:\\BigFolders\\SomeApp")]),t._v("，但在原始位置保留一个链接。")]),t._v(" "),s("p",[s("strong",[t._v("推荐方法：使用 "),s("code",[t._v("robocopy")]),t._v(" 进行安全的文件夹移动")])]),t._v(" "),s("p",[s("code",[t._v("move")]),t._v(" 命令在移动文件夹时，如果中途因文件占用等原因失败，会导致文件被分割在源和目标两个位置，非常不安全。因此，强烈推荐使用更专业的 "),s("code",[t._v("robocopy")]),t._v(" 命令来完成移动操作。")]),t._v(" "),s("p",[s("code",[t._v("robocopy")]),t._v(" 是 Windows 内置的强大工具，它的 "),s("code",[t._v("/MOVE")]),t._v(" 参数可以安全地移动文件和目录（先复制，成功后再从源头删除）。")]),t._v(" "),s("p",[s("strong",[t._v("步骤如下：")])]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("使用 "),s("code",[t._v("robocopy")]),t._v(" 移动文件夹：")]),t._v("\n打开命令提示符（管理员），执行以下命令：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("robocopy "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\Program Files\\SomeApp\\LargeFolder"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\BigFolders\\SomeApp"')]),t._v(" /E /MOVE\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[s("code",[t._v("/E")]),t._v("：表示复制所有子目录，包括空的子目录。")]),t._v(" "),s("li",[s("code",[t._v("/MOVE")]),t._v("：表示移动文件和目录（移动后会从源位置删除）。")])]),t._v(" "),s("p",[t._v("如果 "),s("code",[t._v("robocopy")]),t._v(" 成功完成，它会返回一个小于 8 的退出码，并且源文件夹 "),s("code",[t._v("LargeFolder")]),t._v(" 会被清空。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("创建符号链接：")]),t._v("\n确认文件夹移动成功后，再创建符号链接。为了保证安全，我们依然可以使用 "),s("code",[t._v("&&")]),t._v(" 操作符。")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("robocopy "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\Program Files\\SomeApp\\LargeFolder"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\BigFolders\\SomeApp"')]),t._v(" /E /MOVE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" mklink /d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\Program Files\\SomeApp\\LargeFolder"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\BigFolders\\SomeApp"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("这样，只有在 "),s("code",[t._v("robocopy")]),t._v(" 成功移动所有文件后，才会执行 "),s("code",[t._v("mklink")]),t._v(" 命令。")])])]),t._v(" "),s("p",[s("strong",[t._v("高级技巧：失败回滚（手动清理）")])]),t._v(" "),s("p",[t._v("您可能会问：如果 "),s("code",[t._v("robocopy")]),t._v(" 命令本身执行失败了怎么办？它可能会在目标文件夹留下一些不完整的文件。")]),t._v(" "),s("p",[t._v("在这种情况下，最安全的做法是"),s("strong",[t._v("手动清理目标文件夹")]),t._v("，以确保下次尝试时是一个干净的状态。您可以使用 "),s("code",[t._v("rmdir")]),t._v(" (或 "),s("code",[t._v("rd")]),t._v(") 命令来删除整个文件夹：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rmdir")]),t._v(" /s /q "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\BigFolders\\SomeApp"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[s("code",[t._v("/s")]),t._v("：删除指定目录及其所有子目录和文件。")]),t._v(" "),s("li",[s("code",[t._v("/q")]),t._v("：安静模式，删除时不需要确认。")])]),t._v(" "),s("p",[s("strong",[t._v("因此，对于关键操作，最佳实践是：")])]),t._v(" "),s("ol",[s("li",[t._v("运行 "),s("code",[t._v("robocopy")]),t._v(" 命令。")]),t._v(" "),s("li",[t._v("检查命令的输出，如果报告了错误（"),s("code",[t._v("robocopy")]),t._v(" 的退出码大于等于 8 表示失败）。")]),t._v(" "),s("li",[t._v("手动运行 "),s("code",[t._v("rmdir /s /q <目标文件夹>")]),t._v(" 命令进行清理。")]),t._v(" "),s("li",[t._v("解决问题（如关闭占用文件的程序）后，再重新尝试。")])]),t._v(" "),s("p",[t._v("现在，任何访问 "),s("code",[t._v("C:\\Program Files\\SomeApp\\LargeFolder")]),t._v(" 的程序都会被无缝重定向到 "),s("code",[t._v("D:\\BigFolders\\SomeApp")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_3-创建文件的硬链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建文件的硬链接"}},[t._v("#")]),t._v(" 3. 创建文件的硬链接")]),t._v(" "),s("p",[t._v("假设 "),s("code",[t._v("D:\\Files\\Original.txt")]),t._v(" 是一个重要文件，你想在同一磁盘分区的 "),s("code",[t._v("D:\\Backup")]),t._v(" 目录下创建一个硬链接。")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("mklink /h "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\Backup\\Backup.txt"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\Files\\Original.txt"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("现在，即使 "),s("code",[t._v("D:\\Files\\Original.txt")]),t._v(" 被删除了，"),s("code",[t._v("C:\\Backup\\Backup.txt")]),t._v(" 仍然可以访问文件内容。")]),t._v(" "),s("h3",{attrs:{id:"_4-创建目录联接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-创建目录联接"}},[t._v("#")]),t._v(" 4. 创建目录联接")]),t._v(" "),s("p",[t._v("假设你想在 "),s("code",[t._v("C:\\MyMusic")]),t._v(" 创建一个指向 "),s("code",[t._v("E:\\MusicCollection")]),t._v(" 的目录联接。")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("mklink /j "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\MyMusic"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"E:\\MusicCollection"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("“你没有足够的权限执行此操作”")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("原因")]),t._v("：没有以管理员身份运行命令提示符。")]),t._v(" "),s("li",[s("strong",[t._v("解决方法")]),t._v("：右键单击“命令提示符”或“PowerShell”，然后选择“以管理员身份运行”。")])])]),t._v(" "),s("li",[s("strong",[t._v("“当文件已存在时，无法创建该文件”")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("原因")]),t._v("：你尝试创建的链接名称 "),s("code",[t._v("<link>")]),t._v(" 在该位置已经存在。")]),t._v(" "),s("li",[s("strong",[t._v("解决方法")]),t._v("：删除现有文件或为链接选择一个不同的名称。")])])])]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[s("code",[t._v("mklink")]),t._v(" 是一个强大的工具，可以帮助你更灵活地管理文件和目录。通过理解不同类型的链接，你可以根据具体需求选择最合适的链接方式，从而优化磁盘空间使用和文件组织结构。")])])}),[],!1,null,null,null);s.default=v.exports}}]);